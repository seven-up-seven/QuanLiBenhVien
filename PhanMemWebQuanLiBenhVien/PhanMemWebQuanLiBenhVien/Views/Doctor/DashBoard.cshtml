@{  
   Layout = "~/Views/Shared/_CustomedLayout.cshtml";  
   var dayOfWeek = DateTime.Now.DayOfWeek.ToString();  
   var currentDate = DateTime.Now.ToString("dd/MM/yyyy");
}  
<link rel="stylesheet" href="~/css/Doctor/Dash.css"/>
<div class="row d-flex">  
   <h2 class="text-primary col ">Bảng điều khiển - @dayOfWeek - @currentDate</h2>  
</div>
<div class="p-4">
    <h3 class="text-primary">Lịch làm việc hôm nay</h3>
    <table class="table table-bordered mt-3">
        <thead>
            <tr>
                <th width="100px">Ca</th>
                <th width="300px">Phòng</th>
                <th width="300px">Danh sách bệnh nhân tái khám hôm nay</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Ca 1</td>
                <td>
                    @if (ViewBag.CaTruc1 != null)
                    {
                        <a class="btn btn-primary" asp-controller="PhongKham" asp-action="Detail" asp-route-id="@ViewBag.CaTruc1.RoomId">@ViewBag.CaTruc1.Name </a>
                    }
                </td>
                <td>
                    <ul class="list-unstyled">
                        @if (ViewBag.CaTruc1 != null)
                        {
                            foreach(var pt in ViewBag.CaTruc1.Patients)
                            {
                                <li>@pt.Name</li>
                            }
                        }
                    </ul>
                </td>
            </tr>
            <tr>
                <td>Ca 2</td>
                <td>
                    @if (ViewBag.CaTruc2 != null)
                    {
                        <a class="btn btn-primary" asp-controller="PhongKham" asp-action="Detail" asp-route-id="@ViewBag.CaTruc2.RoomId">@ViewBag.CaTruc2.Name </a>
                    }
                </td>
                <td>
                    <ul class="list-unstyled">
                        @if (ViewBag.CaTruc2 != null)
                        {
                            foreach (var pt in ViewBag.CaTruc2.Patients)
                            {
                                <li>@pt.Name</li>
                            }
                        }
                    </ul>
                </td>
            </tr>
            <tr>
                <td>Ca 3</td>
                <td>
                    @if (ViewBag.CaTruc3 != null)
                    {
                        <a class="btn btn-primary" asp-controller="PhongKham" asp-action="Detail" asp-route-id="@ViewBag.CaTruc3.RoomId">@ViewBag.CaTruc3.Name </a>
                    }
                </td>
                <td>
                    <ul class="list-unstyled">
                        @if (ViewBag.CaTruc3 != null)
                        {
                            foreach (var pt in ViewBag.CaTruc3.Patients)
                            {
                                <li>@pt.Name</li>
                            }
                        }
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const notiButton = document.getElementById("notiButton");
        const notiList = document.getElementById("notiList");

        notiButton.addEventListener("click", function () {
            // Toggle hiển thị danh sách thông báo
            if (notiList.style.display === "none" || notiList.style.display === "") {
                notiList.style.display = "block";
            } else {
                notiList.style.display = "none";
            }
        });

        // Đóng danh sách thông báo khi click bên ngoài
        document.addEventListener("click", function (e) {
            if (!notiButton.contains(e.target) && !notiList.contains(e.target)) {
                notiList.style.display = "none";
            }
        });
    });
</script>
